function varargout = model_results(varargin)
% MODEL_RESULTS M-file for model_results.fig
%      MODEL_RESULTS, by itself, creates a new MODEL_RESULTS or raises the existing
%      singleton*.
%
%      H = MODEL_RESULTS returns the handle to a new MODEL_RESULTS or the handle to
%      the existing singleton*.
%
%      MODEL_RESULTS('CALLBACK',hObject,eventData,handles,...) calls the local
%      function named CALLBACK in MODEL_RESULTS.M with the given input arguments.
%
%      MODEL_RESULTS('Property','Value',...) creates a new MODEL_RESULTS or raises the
%      existing singleton*.  Starting from the left, property value pairs are
%      applied to the GUI before model_results_OpeningFcn gets called.  An
%      unrecognized property name or invalid value makes property application
%      stop.  All inputs are passed to model_results_OpeningFcn via varargin.
%
%      *See GUI Options on GUIDE's Tools menu.  Choose "GUI allows only one
%      instance to run (singleton)".
%
% See also: GUIDE, GUIDATA, GUIHANDLES

% Edit the above text to modify the response to help model_results

% Last Modified by GUIDE v2.5 03-Jun-2010 13:52:58

% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
                   'gui_Singleton',  gui_Singleton, ...
                   'gui_OpeningFcn', @model_results_OpeningFcn, ...
                   'gui_OutputFcn',  @model_results_OutputFcn, ...
                   'gui_LayoutFcn',  [] , ...
                   'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT


% --- Executes just before model_results is made visible.
function model_results_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to model_results (see VARARGIN)

% Choose default command line output for model_results
handles.output = hObject;
figcount_TSF    = 1000;
figcount_DAF    = 2000;
figcount_TSCP   = 3000;
figcount_DACP   = 4000;

setappdata(0,'figcount_TSF',figcount_TSF);
setappdata(0,'figcount_DAF',figcount_DAF);
setappdata(0,'figcount_TSCP',figcount_TSCP);
setappdata(0,'figcount_DACP',figcount_DACP);

button_load_picture(hObject, eventdata, handles);
% Update handles structure
guidata(hObject, handles);

% UIWAIT makes model_results wait for user response (see UIRESUME)
% uiwait(handles.figure1);


% --- Outputs from this function are returned to the command line.
function varargout = model_results_OutputFcn(hObject, eventdata, handles) 
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;


function axes1_CreateFcn(hObject, eventdata, handles)
resulticonsmall = imread('./users/icons/result_small.png');
image(resulticonsmall);
axis off
%imshow('./users/icons/result_small.png');


function resu_but_load_Callback(hObject, eventdata, handles)
[filename, pathname] = uigetfile('Result_*.mat', 'Open result files');
if pathname == 0 %if the user pressed cancelled, then we exit this callback
    return
else
    fullpath_result = [pathname,filename];
    set(handles.resu_txt_load,'String',fullpath_result);
    %
    % Load information from model_forcings file
    load (fullpath_result,...
            'year'              , 'doy'             , 'hour'            , 'decdoy'          ,   ...
            'decyear'           , 'hour'            , 'timevect'        , 'zhc'             ,   ...
            'PARAMS'            ,                                                               ...                      
            ...
            ...
            'An_can_store'      , 'Ch2o_canopy'     , 'Ci_mean'         , 'E_soil_store'    ,   ...
            'Evap_canopy'       , 'Fc_eco_store'    , 'Fc_soil_store'   , 'G_store'         ,   ...
            'H_can_store'       , 'H_eco_store'     , 'H_soil_store'    , 'LAI_in'          ,   ...
            'LE_can_store'      , 'LE_eco_store'    , 'LE_soil_store'   , 'LWout_store'     ,   ...
            'PPT_in'            , 'Pa_in'           , 'RH_soil_store'   , 'Rg_in'           ,   ...
            'Rnrad_can_store'   , 'Rnrad_eco_store' , 'Rnrad_soil_store', 'SWout_store'     ,   ...
            'Sh2o_canopy'       , 'TR_can_store'    , 'Ta_in'           , 'Tl_mean'         ,   ...
            'U_in'              , 'VPD_in'          , 'ZEN_in'          , 'ea_in'           ,   ...
            'fdiff_store'       , 'fsv_mean'        , 'psil_mean'       ,                       ...
            'rpp_weight_store'  , 'smp_weight_store', 'ustar_in'        ,                       ...
            ...
            ...
            'An_diurnal_can'    , 'An_std_can'      , 'Ch2o_diurnal_mod', 'Ch2o_std_mod'    ,   ...
            'Ci_diurnal_mod'    , 'Ci_std_mod'      , 'Evap_diurnal_mod', 'Evap_std_mod'    ,   ...
            'Fc_diurnal_eco'    , 'Fc_std_eco'      , 'Fc_diurnal_soil' , 'Fc_std_soil'     ,   ...
            'G_diurnal_mod'     , 'G_std_mod'       , 'H_diurnal_can'   , 'H_std_can'       ,   ...
            'H_diurnal_eco'     , 'H_std_eco'       , 'H_diurnal_soil'  , 'H_std_soil'      ,   ...
            'LE_diurnal_can'    , 'LE_std_can'      , 'LE_diurnal_eco'  , 'LE_std_eco'      ,   ...
            'LE_diurnal_soil'   , 'LE_std_soil'     , 'Rn_diurnal_can'  , 'Rn_std_can'      ,   ...
            'Rn_diurnal_eco'    , 'Rn_std_eco'      , 'Rn_diurnal_soil' , 'Rn_std_soil'     ,   ...
            'Sh2o_diurnal_mod'  , 'Sh2o_std_mod'    , 'Tl_diurnal_mod'  , 'Tl_std_mod'      ,   ...
            'psil_diurnal_mod'  , 'psil_std_mod'    , 'hr'              ,                       ...
            ...
            ...
            'An_canopy_norm_prof'       , 'An_canopy_prof'          , 'An_shade_norm_prof'      ,...
            'An_shade_prof'             , 'An_sun_norm_prof'        , 'An_sun_prof'             ,...
            'CAz_prof'                  , 'Ch2o_canopy_prof'        , 'Ci_canopy_prof'          ,...
            'Ci_shade_prof'             , 'Ci_sun_prof'             , 'EAz_prof'                ,...
            'Evap_canopy_prof'          , 'H_canopy_norm_prof'      , 'H_canopy_prof'           ,...
            'H_shade_norm_prof'         , 'H_shade_prof'            , 'H_sun_norm_prof'         ,...
            'H_sun_prof'                , 'LAI_shade_prof'          , 'LAI_sun_prof'            ,...
            'LE_canopy_norm_prof'       , 'LE_canopy_prof'          , 'LE_shade_norm_prof'      ,...
            'LE_shade_prof'             , 'LE_sun_norm_prof'        , 'LE_sun_prof'             ,...
            'LWabs_can_prof'            , 'LWemit_can_prof'         , 'NIRabs_canopy_norm_prof' ,...
            'NIRabs_canopy_prof'        , 'NIRabs_sun_norm_prof'    , 'NIRabs_sun_prof'         ,...
            'PARabs_canopy_norm_prof'   , 'PARabs_shade_norm_prof'  , 'PARabs_sun_norm_prof'    ,...
            'PARabs_sun_prof'           , 'Rnrad_canopy_norm_prof'  , 'Rnrad_canopy_prof'       ,...
            'Rnrad_shade_norm_prof'     , 'Rnrad_shade_prof'        , 'Rnrad_sun_norm_prof'     ,...
            'Rnrad_sun_prof'            , 'Sh2o_canopy_prof'        , 'TAz_prof'                ,...
            'Tl_canopy_prof'            , 'Tl_shade_Ta_Diff'        , 'Tl_shade_prof'           ,...
            'Tl_sun_Ta_Diff'            , 'Tl_sun_prof'             , 'Uz_prof'              	,...
            'dryfrac_prof'              , 'fshade_prof'             , 'fsun_prof'               ,...
            'fsv_canopy_prof'           , 'fsv_shade_prof'          , 'fsv_sun_prof'            ,...
            'gbh_canopy_prof'           , 'gbh_shade_prof'          , 'gbh_sun_prof'            ,...
            'gbv_canopy_prof'           , 'gbv_shade_prof'          , 'gbv_sun_prof'            ,...
            'gsv_canopy_prof'           , 'gsv_shade_prof'          , 'gsv_sun_prof'            ,...
            'psil_canopy_prof'          , 'psil_shade_prof'       	, 'psil_sun_prof'           ,...
            ...
            ...
            'An_canopy_diurnal_prof'    , 'An_canopy_std_prof'      , 'An_shade_diurnal_prof'   ,...
            'An_shade_std_prof'         , 'An_sun_diurnal_prof'     , 'An_sun_std_prof'         ,...
            'CAz_diurnal_prof'          , 'CAz_std_prof'            , 'Ch2o_canopy_diurnal_prof',...
            'Ch2o_canopy_std_prof'     	, 'Ci_canopy_diurnal_prof'  , 'Ci_canopy_std_prof'      ,...
            'Ci_shade_diurnal_prof'     , 'Ci_shade_std_prof'       , 'Ci_sun_diurnal_prof'     ,...
            'Ci_sun_std_prof'           , 'EAz_diurnal_prof'        , 'EAz_std_prof'            ,...
            'H_canopy_diurnal_prof'     , 'H_canopy_std_prof'       , 'H_shade_diurnal_prof'    ,...
            'H_shade_std_prof'          , 'H_sun_diurnal_prof'     , 'H_sun_std_prof'           ,...
            'LE_canopy_diurnal_prof'    , 'LE_canopy_std_prof'      , 'LE_shade_diurnal_prof'   ,...
            'LE_shade_std_prof'         , 'LE_sun_diurnal_prof'     , 'LE_sun_std_prof'         ,...
            'LWabs_can_diurnal_prof'    , 'LWabs_can_std_prof'      , 'LWemit_can_diurnal_prof' ,...
            'LWemit_can_std_prof'       , 'NIRabs_canopy_diurnal_prof','NIRabs_canopy_std_prof' ,...
            'NIRabs_shade_diurnal_prof' , 'NIRabs_shade_std_prof'   , 'NIRabs_sun_diurnal_prof' ,...
            'NIRabs_sun_std_prof'       , 'PARabs_canopy_diurnal_prof','PARabs_canopy_std_prof' ,...
            'PARabs_shade_diurnal_prof' , 'PARabs_shade_std_prof'   , 'PARabs_sun_diurnal_prof' ,...
            'PARabs_sun_std_prof'       , 'Rnrad_canopy_diurnal_prof','Rnrad_canopy_std_prof'   ,...
            'Rnrad_shade_diurnal_prof'  , 'Rnrad_shade_std_prof'    , 'Rnrad_sun_diurnal_prof'  ,...
            'Rnrad_sun_std_prof'        , 'Sh2o_canopy_diurnal_prof', 'Sh2o_canopy_std_prof'    ,...
            'TAz_diurnal_prof'          , 'TAz_std_prof'            , 'Tl_canopy_diurnal_prof'  ,...
            'Tl_canopy_std_prof'        , 'Tl_shade_diurnal_prof'   , 'Tl_shade_std_prof'       ,...
            'Tl_sun_diurnal_prof'       , 'Tl_sun_std_prof'         , 'TlmTa_canopy_diurnal_prof',...
            'TlmTa_canopy_std_prof'     , 'TlmTa_shade_diurnal_prof', 'TlmTa_shade_std_prof'    ,...
            'TlmTa_sun_diurnal_prof'    , 'TlmTa_sun_std_prof'      , 'Uz_diurnal_prof'         ,...
            'Uz_std_prof'               , 'dryfrac_diurnal_prof'    , 'dryfrac_std_prof'        ,...
            'fshade_diurnal_prof'       , 'fshade_std_prof'         , 'fsun_diurnal_prof'       ,...
            'fsun_std_prof'             , 'gbv_canopy_diurnal_prof' , 'gbv_canopy_std_prof'     ,...
            'gbv_shade_diurnal_prof'    , 'gbv_shade_std_prof'      , 'gbv_sun_diurnal_prof'    ,...
            'gbv_sun_std_prof'          , 'gsv_canopy_diurnal_prof' , 'gsv_canopy_std_prof'     ,...
            'gsv_shade_diurnal_prof'    , 'gsv_shade_std_prof'      , 'gsv_sun_diurnal_prof'    ,...
            'gsv_sun_std_prof'          , 'wetfrac_diurnal_prof'    , 'wetfrac_std_prof'        );

	TSF_variable = [...             
            An_can_store        , Ch2o_canopy       , Ci_mean           , E_soil_store      ,   ...
            Evap_canopy         , Fc_eco_store      , Fc_soil_store     , G_store           ,   ...
            H_can_store         , H_eco_store       , H_soil_store      , LAI_in            ,   ...
            LE_can_store        , LE_eco_store      , LE_soil_store     , LWout_store       ,   ...
            PPT_in              , Pa_in             , RH_soil_store     , Rg_in             ,   ...
            Rnrad_can_store     , Rnrad_eco_store   , Rnrad_soil_store  , SWout_store       ,   ...
            Sh2o_canopy         , TR_can_store      , Ta_in             , Tl_mean           ,   ...
            U_in                , VPD_in            , ZEN_in            ,                       ...
            ea_in               , fdiff_store       , fsv_mean          , psil_mean         ,   ...
            rpp_weight_store    , smp_weight_store  , ustar_in          ];  
    
    setappdata(0,'TSF_variable',TSF_variable);
    setappdata(0,'hr',hr);
    
    DAF_variable = [...
            An_diurnal_can      ; An_std_can        ; Ch2o_diurnal_mod  ; Ch2o_std_mod      ;   ...
            Ci_diurnal_mod      ; Ci_std_mod      	; Evap_diurnal_mod  ; Evap_std_mod      ;   ...
            Fc_diurnal_eco      ; Fc_std_eco        ; Fc_diurnal_soil   ; Fc_std_soil       ;   ...
            G_diurnal_mod       ; G_std_mod         ; H_diurnal_can     ; H_std_can         ;   ...
            H_diurnal_eco       ; H_std_eco         ; H_diurnal_soil    ; H_std_soil        ;   ...
            LE_diurnal_can      ; LE_std_can        ; LE_diurnal_eco    ; LE_std_eco        ;   ...
            LE_diurnal_soil     ; LE_std_soil       ; Rn_diurnal_can    ; Rn_std_can        ;   ...
            Rn_diurnal_eco      ; Rn_std_eco        ; Rn_diurnal_soil   ; Rn_std_soil       ;   ...
            Sh2o_diurnal_mod    ; Sh2o_std_mod      ; Tl_diurnal_mod    ; Tl_std_mod        ;   ...
            psil_diurnal_mod    ; psil_std_mod      ];        
    
	setappdata(0,'DAF_variable',DAF_variable);    
    
    TSCP_variable = cat(3,...
          	An_canopy_norm_prof         , An_canopy_prof            , An_shade_norm_prof        ,...
            An_shade_prof               , An_sun_norm_prof          , An_sun_prof               ,...
            CAz_prof                    , Ch2o_canopy_prof          , Ci_canopy_prof            ,...
            Ci_shade_prof               , Ci_sun_prof               , EAz_prof                  ,...
            Evap_canopy_prof            , H_canopy_norm_prof        , H_canopy_prof             ,...
            H_shade_norm_prof           , H_shade_prof              , H_sun_norm_prof           ,...
            H_sun_prof                  , LAI_shade_prof            , LAI_sun_prof              ,...
            LE_canopy_norm_prof         , LE_canopy_prof            , LE_shade_norm_prof        ,...
            LE_shade_prof               , LE_sun_norm_prof          , LE_sun_prof               ,...
            LWabs_can_prof              , LWemit_can_prof           , NIRabs_canopy_norm_prof   ,...
            NIRabs_canopy_prof          , NIRabs_sun_norm_prof      , NIRabs_sun_prof           ,...
            PARabs_canopy_norm_prof     , PARabs_shade_norm_prof    , PARabs_sun_norm_prof      ,...
            PARabs_sun_prof             , Rnrad_canopy_norm_prof    , Rnrad_canopy_prof         ,...
            Rnrad_shade_norm_prof       , Rnrad_shade_prof          , Rnrad_sun_norm_prof       ,...
            Rnrad_sun_prof              , Sh2o_canopy_prof          , TAz_prof                  ,...
            Tl_canopy_prof              , Tl_shade_Ta_Diff          , Tl_shade_prof             ,...
            Tl_sun_Ta_Diff              , Tl_sun_prof               , Uz_prof                   ,...
            dryfrac_prof                , fshade_prof               , fsun_prof                 ,...
            fsv_canopy_prof             , fsv_shade_prof            , fsv_sun_prof              ,...
            gbh_canopy_prof             , gbh_shade_prof            , gbh_sun_prof              ,...
            gbv_canopy_prof             , gbv_shade_prof            , gbv_sun_prof              ,...
            gsv_canopy_prof             , gsv_shade_prof            , gsv_sun_prof              ,...
            psil_canopy_prof            , psil_shade_prof       	, psil_sun_prof             );

	setappdata(0,'TSCP_variable',TSCP_variable); 
    setappdata(0,'timevect',timevect);
    setappdata(0,'zhc',zhc);
    setappdata(0,'hcan',PARAMS.CanStruc.hcan);
        
    DACP_variable = cat(3,...
          	An_canopy_diurnal_prof     ,  An_shade_diurnal_prof    ,  An_sun_diurnal_prof      ,...
         	CAz_diurnal_prof           ,  Ch2o_canopy_diurnal_prof ,  Ci_canopy_diurnal_prof   ,...
            Ci_shade_diurnal_prof      ,  Ci_sun_diurnal_prof      ,  EAz_diurnal_prof         ,...
            H_canopy_diurnal_prof      ,  H_shade_diurnal_prof     ,  H_sun_diurnal_prof        ,...
            LE_canopy_diurnal_prof     ,  LE_shade_diurnal_prof    ,  LE_sun_diurnal_prof      ,...
            LWabs_can_diurnal_prof     ,  LWemit_can_diurnal_prof  ,  NIRabs_canopy_diurnal_prof ,...
            NIRabs_shade_diurnal_prof  ,  NIRabs_sun_diurnal_prof  ,  PARabs_canopy_diurnal_prof ,...
            PARabs_shade_diurnal_prof  ,  PARabs_sun_diurnal_prof  ,  Rnrad_canopy_diurnal_prof ,...
            Rnrad_shade_diurnal_prof   ,  Rnrad_sun_diurnal_prof   ,  Sh2o_canopy_diurnal_prof ,...
            TAz_diurnal_prof           ,  Tl_canopy_diurnal_prof   ,  Tl_shade_diurnal_prof    ,...
            Tl_sun_diurnal_prof        ,  TlmTa_canopy_diurnal_prof,  TlmTa_shade_diurnal_prof ,...
            TlmTa_sun_diurnal_prof     ,  Uz_diurnal_prof          ,  dryfrac_diurnal_prof     ,...
            fshade_diurnal_prof        ,  fsun_diurnal_prof        ,  gbv_canopy_diurnal_prof  ,...
            gbv_shade_diurnal_prof     ,  gbv_sun_diurnal_prof     ,  gsv_canopy_diurnal_prof  ,...
            gsv_shade_diurnal_prof     ,  gsv_sun_diurnal_prof     ,  wetfrac_diurnal_prof  	);
    
    setappdata(0,'DACP_variable',DACP_variable); 

        
    % Show time and information 
    [day_s,month_s] = doy2date(year(1),doy(1));
    [day_e,month_e] = doy2date(year(end),doy(end));
    hour_s          = floor(hour(1));
    hour_e          = floor(hour(end));
    min_s           = (hour(1)-hour_s)*60;
    min_e           = (hour(end)-hour_e)*60;
    timestep_dec    = decdoy(2) - decdoy(1);
    day_timestep    = floor(timestep_dec);
    hour_timestep   = floor((timestep_dec-day_timestep)*24);
    min_timestep    = (timestep_dec*24 - hour_timestep)*60;
    
    start_str = [num2str(month_s), ' - ', num2str(day_s), ' - ',num2str(year(1)), '  |  ',...
                 num2str(hour_s), ':'  ,num2str(min_s)];

    end_str = [num2str(month_e), ' - ', num2str(day_e), ' - ',num2str(year(end)), '  |  ',...
                 num2str(hour_e), ':'  ,num2str(min_e)];
                      
    set(handles.resu_txt_starttime,'String',start_str);
    set(handles.resu_txt_endtime,'String',end_str);
    set(handles.resu_txt_day,'String',num2str(day_timestep));
    set(handles.resu_txt_hour,'String',num2str(hour_timestep));
    set(handles.resu_txt_min,'String',num2str(min_timestep));
    
    %Show information in Time Series Fluxes
    TSF_str = {...
            'An can store'      , 'Ch2o canopy'     , 'Ci mean'         , 'E soil store'    ,   ...
            'Evap canopy'       , 'Fc eco store'    , 'Fc soil store'   , 'G store'         ,   ...
            'H can store'       , 'H eco store'     , 'H soil store'    , 'LAI in'          ,   ...
            'LE can store'      , 'LE eco store'    , 'LE soil store'   , 'LWout store'     ,   ...
            'PPT in'            , 'Pa in'           , 'RH soil store'   , 'Rg in'           ,   ...
            'Rnrad can store'   , 'Rnrad eco store' , 'Rnrad soil store', 'SWout store'     ,   ...
            'Sh2o canopy'       , 'TR can store'    , 'Ta in'           , 'Tl mean'         ,   ...
            'U in'              , 'VPD in'          , 'ZEN in'          ,   ...
            'ea in'             , 'fdiff store'     , 'fsv mean'        , 'psil mean'       ,   ...
            'rpp weight store'  , 'smp weight store', 'ustar in'        }';
    set(handles.resu_lst_TSF,'String',TSF_str);
    
    %Show information in Diurnally Averaged Fluxes
    DAF_str = {...
            'An diurnal can'    , 'Ch2o diurnal mod', 'Ci diurnal mod'  , 'Evap diurnal mod',   ...
            'Fc diurnal eco'    , 'Fc diurnal soil' , 'G diurnal mod'   , 'H diurnal can'   ,   ...
            'H diurnal eco'     , 'H diurnal soil'  , 'LE diurnal can'  , 'LE diurnal eco'  ,   ...
            'LE diurnal soil'   , 'Rn diurnal can'  , 'Rn diurnal eco'  , 'Rn diurnal soil' ,   ...
            'Sh2o diurnal mod'  , 'Tl diurnal mod'  , 'psil diurnal mod'}';
	set(handles.resu_lst_DAF,'String',DAF_str);

    TSCP_str = {...
            'An canopy norm prof'       , 'An canopy prof'          , 'An shade norm prof'      ,...
            'An shade prof'             , 'An sun norm prof'        , 'An sun prof'             ,...
            'CAz prof'                  , 'Ch2o canopy prof'        , 'Ci canopy prof'          ,...
            'Ci shade prof'             , 'Ci sun prof'             , 'EAz prof'                ,...
            'Evap canopy prof'          , 'H canopy norm prof'      , 'H canopy prof'           ,...
            'H shade norm prof'         , 'H shade prof'            , 'H sun norm prof'         ,...
            'H sun prof'                , 'LAI shade prof'          , 'LAI sun prof'            ,...
            'LE canopy norm prof'       , 'LE canopy prof'          , 'LE shade norm prof'      ,...
            'LE shade prof'             , 'LE sun norm prof'        , 'LE sun prof'             ,...
            'LWabs can prof'            , 'LWemit can prof'         , 'NIRabs canopy norm prof' ,...
            'NIRabs canopy prof'        , 'NIRabs sun norm prof'    , 'NIRabs sun prof'         ,...
            'PARabs canopy norm prof'   , 'PARabs shade norm prof'  , 'PARabs sun norm prof'    ,...
            'PARabs sun prof'           , 'Rnrad canopy norm prof'  , 'Rnrad canopy prof'       ,...
            'Rnrad shade norm prof'     , 'Rnrad shade prof'        , 'Rnrad sun norm prof'     ,...
            'Rnrad sun prof'            , 'Sh2o canopy prof'        , 'TAz prof'                ,...
            'Tl canopy prof'            , 'Tl shade Ta Diff'        , 'Tl shade prof'           ,...
            'Tl sun Ta Diff'            , 'Tl sun prof'             , 'Uz prof'              	,...
            'dryfrac prof'              , 'fshade prof'             , 'fsun prof'               ,...
            'fsv canopy prof'           , 'fsv shade prof'          , 'fsv sun prof'            ,...
            'gbh canopy prof'           , 'gbh shade prof'          , 'gbh sun prof'            ,...
            'gbv canopy prof'           , 'gbv shade prof'          , 'gbv sun prof'            ,...
            'gsv canopy prof'           , 'gsv shade prof'          , 'gsv sun prof'            ,...
            'psil canopy prof'          , 'psil shade prof'       	, 'psil sun prof'           }';
	set(handles.resu_lst_TSCP,'String',TSCP_str);

    DACP_str = {...
            'An canopy diurnal prof'    , 'An shade diurnal prof'   , 'An sun diurnal prof'     ,...
            'CAz diurnal prof'          , 'Ch2o canopy diurnal prof', 'Ci canopy diurnal prof'  ,...
            'Ci shade diurnal prof'     , 'Ci sun diurnal prof'     , 'EAz diurnal prof'        ,...
            'H canopy diurnal prof'     , 'H shade diurnal prof'    , 'H sun diurnal prof'      ,...
            'LE canopy diurnal prof'    , 'LE shade diurnal prof'   , 'LE sun diurnal prof'     ,...
            'LWabs can diurnal prof'    , 'LWemit can diurnal prof' , 'NIRabs canopy diurnal prof',...
            'NIRabs shade diurnal prof' , 'NIRabs sun diurnal prof' , 'PARabs canopy diurnal prof',...
            'PARabs shade diurnal prof' , 'PARabs sun diurnal prof' , 'Rnrad canopy diurnal prof',...
            'Rnrad shade diurnal prof'  , 'Rnrad sun diurnal prof'  , 'Sh2o canopy diurnal prof',...
            'TAz diurnal prof'          , 'Tl canopy diurnal prof'  , 'Tl shade diurnal prof'   ,...
            'Tl sun diurnal prof'       , 'TlmTa canopy diurnal prof','TlmTa shade diurnal prof',...
            'TlmTa sun diurnal prof'    , 'Uz diurnal prof'         , 'dryfrac diurnal prof'    ,...
            'fshade diurnal prof'       , 'fsun diurnal prof'       , 'gbv canopy diurnal prof' ,...
            'gbv shade diurnal prof'    , 'gbv sun diurnal prof'    , 'gsv canopy diurnal prof' ,...
            'gsv shade diurnal prof'    , 'gsv sun diurnal prof'    , 'wetfrac diurnal prof' 	};
	set(handles.resu_lst_DACP,'String',DACP_str);

end

function resu_txt_load_Callback(hObject, eventdata, handles)


function resu_txt_load_CreateFcn(hObject, eventdata, handles)

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function pushbutton2_Callback(hObject, eventdata, handles)


function resu_but_exit_Callback(hObject, eventdata, handles)

function button_load_picture(hObject, eventdata, handles)
RGB_open=imread('./users/icons/open.png');
set(handles.resu_but_load, 'Cdata', RGB_open);

function resu_but_load_CreateFcn(hObject, eventdata, handles)


function pushbutton4_Callback(hObject, eventdata, handles)
close;

function pushbutton5_Callback(hObject, eventdata, handles)


function checkbox1_Callback(hObject, eventdata, handles)


function resu_but_plot_TSF_Callback(hObject, eventdata, handles)
index_TSF       = get(handles.resu_lst_TSF,'Value');
TSF_str         = get(handles.resu_lst_TSF,'String');
TSF_variable    = getappdata(0,'TSF_variable');
figcount_TSF    = getappdata(0,'figcount_TSF');


TSF_hold        = get(handles.TSF_chk_hold,'Value');
if TSF_hold == 1
    hold on
else
    hold off
end
figure(figcount_TSF)
figcount_TSF = figcount_TSF + 1;
setappdata(0, 'figcount_TSF', figcount_TSF);
plot(TSF_variable(:,index_TSF));
y_lbl_str = TSF_str(index_TSF);
xlabel('Time step');
ylabel(y_lbl_str);

TSF_grid        = get(handles.TSF_chk_grid,'Value');
if TSF_grid == 1
    grid on
else
    grid off
end


function TSF_chk_hold_Callback(hObject, eventdata, handles)


function pushbutton8_Callback(hObject, eventdata, handles)


function checkbox4_Callback(hObject, eventdata, handles)


function pushbutton9_Callback(hObject, eventdata, handles)


function checkbox5_Callback(hObject, eventdata, handles)


function resu_txt_hour_Callback(hObject, eventdata, handles)


function resu_txt_hour_CreateFcn(hObject, eventdata, handles)

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_txt_min_Callback(hObject, eventdata, handles)


function resu_txt_min_CreateFcn(hObject, eventdata, handles)

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_txt_day_Callback(hObject, eventdata, handles)


function resu_txt_day_CreateFcn(hObject, eventdata, handles)

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_txt_endtime_Callback(hObject, eventdata, handles)


function resu_txt_endtime_CreateFcn(hObject, eventdata, handles)

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_but_endtime_Callback(hObject, eventdata, handles)


function resu_txt_starttime_Callback(hObject, eventdata, handles)


function resu_txt_starttime_CreateFcn(hObject, eventdata, handles)

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_but_starttime_Callback(hObject, eventdata, handles)


function resu_but_plot_DAF_Callback(hObject, eventdata, handles)
index_DAF       = get(handles.resu_lst_DAF,'Value');
DAF_str         = get(handles.resu_lst_DAF,'String');
DAF_variable    = getappdata(0,'DAF_variable');
hr              = getappdata(0,'hr');
figcount_DAF    = getappdata(0,'figcount_DAF');


DAF_hold        = get(handles.DAF_chk_hold,'Value');
if DAF_hold == 1
    hold on
else
    hold off
end


figure(figcount_DAF);
figcount_DAF = figcount_DAF + 1;
setappdata(0, 'figcount_DAF', figcount_DAF);
errorbar(hr, DAF_variable(2*index_DAF-1,:), DAF_variable(2*index_DAF,:), '-ok')
y_lbl_str       = DAF_str(index_DAF);
xlabel('Hour');
ylabel(y_lbl_str);

DAF_grid        = get(handles.DAF_chk_grid,'Value');
if DAF_grid == 1
    grid on
else
    grid off
end


function DAF_chk_hold_Callback(hObject, eventdata, handles)


function resu_but_plot_DACP_Callback(hObject, eventdata, handles)
index_DACP      = get(handles.resu_lst_DACP,'Value');
DACP_str        = get(handles.resu_lst_DACP,'String');
DACP_variable   = getappdata(0,'DACP_variable'); 
hr              = getappdata(0,'hr');
zhc             = getappdata(0,'zhc');
hcan            = getappdata(0,'hcan');
figcount_DACP   = getappdata(0,'figcount_DACP');

figure(figcount_DACP);
figcount_DACP = figcount_DACP + 1;
setappdata(0, 'figcount_DACP', figcount_DACP);

pcolor(hr, zhc/hcan, DACP_variable(:,:,index_DACP))
shading interp
colorbar
tit             = DACP_str(index_DACP);
title(tit, 'FontSize', 12, 'FontWeight', 'b')
ylabel('\bf z / h', 'FontSize', 12)
xlabel('\bf Hour', 'FontSize', 12)

function checkbox10_Callback(hObject, eventdata, handles)


function resu_but_plot_TSCP_Callback(hObject, eventdata, handles)
index_TSCP      = get(handles.resu_lst_TSCP,'Value');
TSCP_str        = get(handles.resu_lst_TSCP,'String');
TSCP_variable   = getappdata(0,'TSCP_variable'); 
timevect        = getappdata(0,'timevect');
zhc             = getappdata(0,'zhc');
hcan            = getappdata(0,'hcan');
figcount_TSCP   = getappdata(0,'figcount_TSCP');

figure(figcount_TSCP);
figcount_TSCP = figcount_TSCP + 1;
setappdata(0, 'figcount_TSCP', figcount_TSCP);
pcolor(timevect, zhc/hcan, TSCP_variable(:,:,index_TSCP))
shading interp
colorbar
tit             = TSCP_str(index_TSCP);
title(tit, 'FontSize', 12)
ylabel('\bf z / h', 'FontSize', 12)
xlabel('\bf DOY', 'FontSize', 12)

function checkbox9_Callback(hObject, eventdata, handles)


function popupmenu2_Callback(hObject, eventdata, handles)


function popupmenu2_CreateFcn(hObject, eventdata, handles)

% Hint: popupmenu controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function popupmenu4_Callback(hObject, eventdata, handles)


function popupmenu4_CreateFcn(hObject, eventdata, handles)

% Hint: popupmenu controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_lst_TSF_Callback(hObject, eventdata, handles)


function resu_lst_TSF_CreateFcn(hObject, eventdata, handles)

% Hint: listbox controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_lst_DACP_Callback(hObject, eventdata, handles)


function resu_lst_DACP_CreateFcn(hObject, eventdata, handles)

% Hint: listbox controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_lst_TSCP_Callback(hObject, eventdata, handles)


function resu_lst_TSCP_CreateFcn(hObject, eventdata, handles)

% Hint: listbox controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function resu_lst_DAF_Callback(hObject, eventdata, handles)


function resu_lst_DAF_CreateFcn(hObject, eventdata, handles)

% Hint: listbox controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end


function DAF_chk_grid_Callback(hObject, eventdata, handles)


function TSF_chk_grid_Callback(hObject, eventdata, handles)


function pushbutton24_Callback(hObject, eventdata, handles)
